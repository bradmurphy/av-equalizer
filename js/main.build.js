!function e(t,i,r){function n(s,a){if(!i[s]){if(!t[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[s]={exports:{}};t[s][0].call(u.exports,function(e){var i=t[s][1][e];return n(i?i:e)},u,u.exports,e,t,i,r)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(e,t,i){"use strict";var r=function(){this.audio="audio/sublime.mp3",this.equalizer=document.querySelector("#equalizer"),this.width=window.innerWidth,this.height=window.innerHeight,this.viewAngle=45,this.aspect=this.width/this.height,this.near=.1,this.far=1e5,this.timer=0,this.bars=[],this.position=-80,this.renderer=new THREE.WebGLRenderer,this.camera=new THREE.PerspectiveCamera(this.viewAngle,this.aspect,this.near,this.far),this.scene=new THREE.Scene,this.renderer.setClearColor(16777215,0),this.createAudio()};r.prototype.init=function(){this.loadSong(this.audio),this.createScene()},r.prototype.createAudio=function(){this.context=new AudioContext,this.analyser=this.context.createAnalyser(),this.analyser.smoothingTimeConstant=.4,this.analyser.minDecibels=-90,this.analyser.maxDecibels=-10,this.analyser.fftSize=32,this.sourceNode=this.context.createBufferSource();var e=this.context.createChannelSplitter();this.sourceNode.connect(e),e.connect(this.analyser,0),this.sourceNode.connect(this.context.destination),this.init()},r.prototype.loadSong=function(e){var t=this,i=new XMLHttpRequest;i.open("GET",e,!0),i.crossOrigin="anonymous",i.responseType="arraybuffer",i.onload=function(){t.context.decodeAudioData(i.response).then(function(e){t.songBuffer=e,t.playSong(e),e.loop=!0})["catch"](function(e){return t._onError(e)})},i.send()},r.prototype.playSong=function(e){e.duration;this.sourceNode.buffer=e,this.sourceNode.start(0)},r.prototype._onError=function(e){console.info("Audio Error: "+e)},r.prototype.createScene=function(){this.scene.add(this.camera),this.camera.position.z=200,this.renderer.setSize(this.width,this.height);for(var e=16,t=0;t<e;t++){var i=new THREE.CylinderGeometry(5,5,10,32),r=new THREE.MeshBasicMaterial({color:16777215*Math.random(),wireframe:!0}),n=new THREE.Mesh(i,r);this.scene.add(n),this.bars.push(n),n.position.set(this.position,0,0),this.position+=10}this.equalizer.appendChild(this.renderer.domElement),this.render()},r.prototype.update=function(){var e=this,t=this.analyser.frequencyBinCount,i=new Uint8Array(t);this.analyser.getByteFrequencyData(i),i.forEach(function(t,i){e.bars[i].scale.y=t/64})},r.prototype.render=function(){this.update(),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.render.bind(this))};new r},{}]},{},[1]);
//# sourceMappingURL=main.build.js.map
