/* Version: 1468008592836 */
/* Created: Fri Jul 08 2016 16:09:52 GMT-0400 (Eastern Daylight Time) */
!function e(t,r,i){function n(a,s){if(!r[a]){if(!t[a]){var h="function"==typeof require&&require;if(!s&&h)return h(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var d=r[a]={exports:{}};t[a][0].call(d.exports,function(e){var r=t[a][1][e];return n(r?r:e)},d,d.exports,e,t,r,i)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(e,t,r){"use strict";var i=function(){this.audio="audio/dubfx.mp3",this.equalizer=document.querySelector("#equalizer"),this.width=window.innerWidth,this.height=window.innerHeight,this.viewAngle=45,this.aspect=this.width/this.height,this.near=.1,this.far=1e5,this.timer=0,this.bars=[],this.position=-80,this.drop=!1,this.renderer=new THREE.WebGLRenderer,this.camera=new THREE.PerspectiveCamera(this.viewAngle,this.aspect,this.near,this.far),this.scene=new THREE.Scene,this.createAudio()};i.prototype.init=function(){this.loadSong(this.audio),this.createScene()},i.prototype.createAudio=function(){this.context=new AudioContext,this.analyser=this.context.createAnalyser(),this.analyser.smoothingTimeConstant=.4,this.analyser.minDecibels=-90,this.analyser.maxDecibels=-10,this.analyser.fftSize=64,this.sourceNode=this.context.createBufferSource();var e=this.context.createChannelSplitter();this.sourceNode.connect(e),e.connect(this.analyser,0),this.sourceNode.connect(this.context.destination),this.init()},i.prototype.loadSong=function(e){var t=this,r=new XMLHttpRequest;r.open("GET",e,!0),r.crossOrigin="anonymous",r.responseType="arraybuffer",r.onload=function(){t.context.decodeAudioData(r.response).then(function(e){t.songBuffer=e,t.playSong(e),e.loop=!0})["catch"](function(e){return t._onError(e)})},r.send()},i.prototype.playSong=function(e){e.duration;this.sourceNode.buffer=e,this.sourceNode.start(0)},i.prototype._onError=function(e){console.info("Audio Error: "+e)},i.prototype.averageVolume=function(e){var t,r=0,i=e.length;return e.forEach(function(e){return r+=e}),t=r/i},i.prototype.createScene=function(){this.scene.add(this.camera),this.camera.position.z=200,this.renderer.setSize(this.width,this.height);for(var e=32,t=0;t<e;t++){var r=new THREE.CylinderGeometry(2,2,10,32),i=new THREE.MeshBasicMaterial({color:16777215*Math.random()}),n=new THREE.Mesh(r,i);this.bars.push(n),this.scene.add(n),n.position.set(this.position,0,0),this.position+=4.75}this.equalizer.appendChild(this.renderer.domElement),this.render()},i.prototype.update=function(){var e=this,t=this.analyser.frequencyBinCount,r=new Uint8Array(t);this.analyser.getByteFrequencyData(r);var i=this.averageVolume(r);r.forEach(function(t,r){var n=i/64*1,o=n*t;if(o>260&&!e.drop&&(e.addParticles(),e.drop=!0),o>=270&&e.drop){var a=50*Math.random()-25,s=100*Math.random()-50,h=300*Math.random()-100;e.changeCamera(a,s,h)}e.drop&&(e.particleSystem.rotation.y+=9e-4*Math.random(),e.particleSystem.rotation.x+=2e-4*Math.random(),o>=120&&e.bars[r].material.color.setHex(16777215*Math.random())),e.bars[r].scale.y=Math.max(.17,t/64)})},i.prototype.changeCamera=function(e,t,r){this.camera.position.x=e,this.camera.position.y=t,this.camera.position.z=r,this.camera.lookAt(this.scene.position)},i.prototype.addParticles=function(){this.camera.position.x=25,this.camera.position.y=150,this.camera.position.z=100,this.camera.lookAt(this.scene.position);var e=1600,t=new THREE.Geometry,r=new THREE.TextureLoader,i=new THREE.PointsMaterial({color:6535423,size:4,map:r.load("images/dot.png"),transparent:!0});window.material=i;for(var n=0;n<e;n++){var o=100*Math.random()-50,a=100*Math.random()-50,s=100*Math.random()-50,h=new THREE.Vector3(o,a,s);t.vertices.push(h)}this.particleSystem=new THREE.Points(t,i),this.particleSystem.sortParticles=!0,this.scene.add(this.particleSystem)},i.prototype.render=function(){this.update(),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.render.bind(this))};new i},{}]},{},[1]);